{"mappings":"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","sources":["FlappySing.js"],"sourcesContent":["\"use strict\";\r\nlet audioContext = null;\r\nlet analyser = null;\r\nlet mediaStreamSource = null;\r\nlet noteElem = null;\r\nlet freqElem = null;\r\nlet buflen = 2048;\r\nconst maxPitch = Math.log10(622.25);//D#5\r\nlet buf = new Float32Array( buflen );\r\nlet noteStrings = [\"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\"];\r\nlet charElem = null;\r\nlet ObTElem = null;\r\nlet ObBElem = null;\r\nlet ObT2Elem = null;\r\nlet ObB2Elem = null;\r\nlet scoreElem = null;\r\nlet score = 0;\r\nlet insideObstacle = false;\r\nlet canvasHeight = 572;\r\nlet charHeight = 60;\r\nlet series = 0;\r\n\r\n//Altezza in pixel - nota\r\n//Sistemare interfaccia\r\n//Score: 1 -> 'score:' scompare dopo\r\n\r\n//Aggiunte:\r\n//Note sugli ostacoli, gettone in mezzo al buco che viene preso\r\n\r\n//Sfondo con righe per le note (solo per beta test)\r\n\r\nlet fraMartino = [5, 7, 9, 5, 5, 7, 9, 5, 9, 10, 12, 12,  9, 10, 12, 12];\r\n//console.log(fraMartino.length);\r\nfor(let i=0; i<fraMartino.length; i++){\r\n\tfraMartino[i] = (fraMartino[i]+12) * 16;\r\n}\r\n\r\nfunction starting() {\r\n\r\n\tseries = 0;\r\n\r\n\tnoteElem = document.getElementById( \"note\" );\r\n\tfreqElem = document.getElementById( \"freq\" );\r\n\tcharElem = document.getElementById( \"character\" );\r\n\tObTElem = document.getElementById(\"obstacleT\");\r\n\tObBElem = document.getElementById(\"obstacleB\");\r\n\tObT2Elem = document.getElementById(\"obstacleT2\");\r\n\tObB2Elem = document.getElementById(\"obstacleB2\");\r\n\tscoreElem = document.getElementById(\"score\");\r\n\t\r\n\tfunction GenerationHoleRandom(ObB, ObT){\r\n\t\tlet halfHole = 55;\r\n\t\tlet random = Math.random() * (canvasHeight - halfHole * 2);\r\n\t\tlet heightHole = Math.max(halfHole * 2, random);\r\n\t\tObB.style.height = heightHole - halfHole + \"px\";\r\n\t\tObT.style.height = canvasHeight - heightHole - halfHole + \"px\";\r\n\t}\r\n\r\n\tfunction GenerationHoleSeries(ObB, ObT){\r\n\t\r\n\t\tObB.style.height = fraMartino[series] - 8 + \"px\";\r\n\t\tObT.style.height = canvasHeight - fraMartino[series] - 110 + \"px\";\r\n\t\tseries++;\r\n\t\tif(series == fraMartino.length)\r\n\t\t\tseries = 0;\r\n\t\t//console.log(series);\r\n\t\tconsole.log(fraMartino);\r\n\t}\r\n\r\n\tfunction GenerationObstacle(){\r\n\t\tObTElem.style.animation = 'none';\r\n\t\tObBElem.style.animation = 'none'\r\n\t\tObTElem.offsetHeight;\r\n\t\tObBElem.offsetHeight;\r\n\t\tObTElem.style.animation = 'obstacle 4s linear'; //Cambiati da 6 a 4\r\n\t\tObBElem.style.animation = 'obstacle 4s linear';\r\n\t\tGenerationHoleSeries(ObBElem, ObTElem);\r\n\t\t//GenerationHoleRandom(ObBElem, ObTElem);\r\n\t}\r\n\r\n\tfunction GenerationObstacle2(){\r\n\t\tObT2Elem.style.animation = 'none';\r\n\t\tObB2Elem.style.animation = 'none'\r\n\t\tObT2Elem.offsetHeight;\r\n\t\tObB2Elem.offsetHeight;\r\n\t\tObT2Elem.style.animation = 'obstacle 4s linear';\r\n\t\tObB2Elem.style.animation = 'obstacle 4s linear';\r\n\t\tGenerationHoleSeries(ObB2Elem, ObT2Elem);\r\n\t\t//GenerationHoleRandom(ObB2Elem, ObT2Elem);\r\n\t}\r\n\r\n\tGenerationObstacle();\r\n\tsetTimeout(GenerationObstacle2, 2000); //cambiato da 3000 a 2000\r\n\r\n\tObBElem.addEventListener('animationend', () => {\r\n\t\tGenerationObstacle();\r\n\t});\r\n\r\n\tObB2Elem.addEventListener('animationend', () => {\r\n\t\tGenerationObstacle2();\r\n\t});\r\n\r\n\tsetInterval(function(){ \r\n\t\tlet ObstacleTLeft = parseInt(window.getComputedStyle(ObTElem).getPropertyValue(\"left\"))+15;\r\n\t\tlet ObstacleBLeft = parseInt(window.getComputedStyle(ObBElem).getPropertyValue(\"left\"))+15;\r\n\t\tlet ObstacleTBottom = parseInt(window.getComputedStyle(ObTElem).getPropertyValue(\"height\"))-10;\r\n\t\tlet ObstacleBTop = parseInt(window.getComputedStyle(ObBElem).getPropertyValue(\"height\"))-10;\r\n\t\tlet ObstacleT2Left = parseInt(window.getComputedStyle(ObT2Elem).getPropertyValue(\"left\"))+15;\r\n\t\tlet ObstacleB2Left = parseInt(window.getComputedStyle(ObB2Elem).getPropertyValue(\"left\"))+15;\r\n\t\tlet ObstacleT2Bottom = parseInt(window.getComputedStyle(ObT2Elem).getPropertyValue(\"height\"))-10;\r\n\t\tlet ObstacleB2Top = parseInt(window.getComputedStyle(ObB2Elem).getPropertyValue(\"height\"))-10;\r\n\t\tlet charY = parseInt(window.getComputedStyle(charElem).getPropertyValue(\"bottom\"));\r\n\t\r\n\t\tif(((ObstacleTLeft < 100) && (ObstacleTLeft > 50)) || ((ObstacleT2Left < 100) && (ObstacleT2Left > 50))){// score incrementation\r\n\t\t\tinsideObstacle = true;\r\n\t\t}else{\r\n\t\t\tif(insideObstacle == true){\r\n\t\t\tscore += 1;\r\n\t\t\tscoreElem.innerHTML = score;\r\n\t\t\tinsideObstacle = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*if(((ObstacleTLeft && ObstacleBLeft) < 100) && ((ObstacleTLeft && ObstacleBLeft) > 50)) {// collision detection\r\n\t\t\tif((charY < ObstacleBTop) || (charY > canvasHeight-charHeight - ObstacleTBottom)){\r\n\t\t\t\talert(\"Game Over!\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(((ObstacleT2Left && ObstacleB2Left) < 100) && ((ObstacleT2Left && ObstacleB2Left) > 50)) {\r\n\t\t\tif((charY < ObstacleB2Top) || (charY > canvasHeight-charHeight - ObstacleT2Bottom)){\r\n\t\t\t\talert(\"Game Over!\");\r\n\t\t\t}\r\n\t\t}*/\r\n\t},10);\r\n\t\r\n    navigator.mediaDevices.getUserMedia({audio: true}).then(gotStream);\r\n}\r\n\r\n\r\nfunction noteFromPitch( frequency ) {\r\n\tlet noteNum = 12 * (Math.log( frequency / 440 )/Math.log(2) );\r\n\treturn Math.round( noteNum ) + 69;\r\n}\r\n\r\nfunction autoCorrelate( buf, sampleRate ) {\r\n\t// Implements the ACF2+ algorithm\r\n\tlet SIZE = buf.length;\r\n\tlet rms = 0;\r\n\r\n\tfor (let i=0;i<SIZE;i++) {\r\n\t\tconst val = buf[i];\r\n\t\trms += val*val;\r\n\t}\r\n\trms = Math.sqrt(rms/SIZE);\r\n\tif (rms<0.02) // not enough signal\r\n\t\treturn -1;\r\n\r\n\tvar r1=0, r2=SIZE-1, thres=0.2;\r\n\tfor (var i=0; i<SIZE/2; i++)\r\n\t\tif (Math.abs(buf[i])<thres) { r1=i; break; }\r\n\tfor (var i=1; i<SIZE/2; i++)\r\n\t\tif (Math.abs(buf[SIZE-i])<thres) { r2=SIZE-i; break; }\r\n\r\n\tbuf = buf.slice(r1,r2);\r\n\tSIZE = buf.length;\r\n\r\n\tlet c = new Array(SIZE).fill(0);\r\n\tfor (var i=0; i<SIZE; i++)\r\n\t\tfor (let j=0; j<SIZE-i; j++)\r\n\t\t\tc[i] = c[i] + buf[j]*buf[j+i];\r\n\r\n\tlet d=0; while (c[d]>c[d+1]) d++;\r\n\tlet maxval=-1, maxpos=-1;\r\n\tfor (let i=d; i<SIZE; i++) {\r\n\t\tif (c[i] > maxval) {\r\n\t\t\tmaxval = c[i];\r\n\t\t\tmaxpos = i;\r\n\t\t}\r\n\t}\r\n\tlet T0 = maxpos;\r\n\r\n\tlet x1=c[T0-1], x2=c[T0], x3=c[T0+1];\r\n\tlet a = (x1 + x3 - 2*x2)/2;\r\n\tlet b = (x3 - x1)/2;\r\n\tif (a) T0 = T0 - b/(2*a);\r\n\r\n\treturn sampleRate/T0;\r\n}\r\n\r\nfunction updatePitch() {//it also update the character y position\r\n\tanalyser.getFloatTimeDomainData( buf );\r\n\tlet pitch = autoCorrelate( buf, audioContext.sampleRate );\r\n    if (pitch == -1){\r\n        noteElem.innerHTML = \"--\"\r\n\t\tfreqElem.innerHTML = \"--Hz\";\r\n\t\tcharElem.style.transition = \"bottom 4s\";\r\n\t\tcharElem.style.bottom = 0;\r\n    }else { //manca la scala note-px\r\n        let note =  noteFromPitch( pitch );\r\n        noteElem.innerHTML = noteStrings[note%12];\r\n\t\tfreqElem.innerHTML = Math.round(pitch) + \"Hz\";\r\n\t\t//Velocità del pg aumentata da 0.7 a 0.4\r\n\t\tcharElem.style.transition = \"bottom 0.4s linear\";  //16px a semitono \r\n\t\tlet pitchCor = Math.max(Math.log10(98), Math.log10(pitch))\r\n\t\tlet buff1 = Math.min(pitchCor, maxPitch)-Math.log10(98);\r\n\t\tlet buff2 = maxPitch - Math.log10(98);\r\n\t\tcharElem.style.bottom =  buff1/buff2 * (canvasHeight-charHeight) + \"px\";\r\n    }\r\n}\r\n\r\nfunction gotStream(stream) {\r\n\taudioContext = new AudioContext();\r\n\tmediaStreamSource = audioContext.createMediaStreamSource(stream);\r\n\tanalyser = audioContext.createAnalyser();\r\n\tanalyser.fftSize = buflen;\r\n\tmediaStreamSource.connect( analyser );\r\n\tsetInterval(updatePitch, 100);\r\n}\r\n\r\nwindow.addEventListener(\"load\", () => {\r\n\tstarting();\r\n});\r\n"],"names":[],"version":3,"file":"index.7048523e.js.map","sourceRoot":"/__parcel_source_root/"}